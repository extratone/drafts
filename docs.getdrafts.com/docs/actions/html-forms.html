<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Advanced HTML Previews - Drafts User Guide</title> <link rel="shortcut icon" href="../../favicon.ico.html" type="image/x-icon"> <link rel="stylesheet" href="../../assets/css/just-the-docs-default.css"> <script type="text/javascript" src="../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Advanced HTML Previews | Drafts User Guide</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="Advanced HTML Previews" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation for Drafts app, a quick-capture note taking app for iPhone, iPad, Mac and Apple Watch." /> <meta property="og:description" content="Documentation for Drafts app, a quick-capture note taking app for iPhone, iPad, Mac and Apple Watch." /> <link rel="canonical" href="html-forms.html" /> <meta property="og:url" content="https://docs.getdrafts.com/docs/actions/html-forms.html" /> <meta property="og:site_name" content="Drafts User Guide" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Advanced HTML Previews" /> <script type="application/ld+json"> {"headline":"Advanced HTML Previews","description":"Documentation for Drafts app, a quick-capture note taking app for iPhone, iPad, Mac and Apple Watch.","url":"https://docs.getdrafts.com/docs/actions/html-forms.html","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="Advanced HTML Previews"> <meta name="twitter:description" content="Documentation for Drafts app, a quick-capture note taking app for iPhone, iPad, Mac and Apple Watch. "> <meta name="twitter:image" content="https://docs.getdrafts.com/images/og-image.png" /> <meta property="og:type" content="article"> <meta property="og:title" content="Advanced HTML Previews"> <meta property="og:description" content="Documentation for Drafts app, a quick-capture note taking app for iPhone, iPad, Mac and Apple Watch. "> <meta property="og:image" content="https://docs.getdrafts.com/images/og-image.png" /> <link rel="apple-touch-icon" sizes="57x57" href="../../images/favicons/apple-touch-icon-57x57.png"> <link rel="apple-touch-icon" sizes="60x60" href="../../images/favicons/apple-touch-icon-60x60.png"> <link rel="apple-touch-icon" sizes="72x72" href="../../images/favicons/apple-touch-icon-72x72.png"> <link rel="apple-touch-icon" sizes="76x76" href="../../images/favicons/apple-touch-icon-76x76.png"> <link rel="apple-touch-icon" sizes="114x114" href="../../images/favicons/apple-touch-icon-114x114.png"> <link rel="apple-touch-icon" sizes="120x120" href="../../images/favicons/apple-touch-icon-120x120.png"> <link rel="apple-touch-icon" sizes="144x144" href="../../images/favicons/apple-touch-icon-144x144.png"> <link rel="apple-touch-icon" sizes="152x152" href="../../images/favicons/apple-touch-icon-152x152.png"> <link rel="apple-touch-icon" sizes="180x180" href="../../images/favicons/apple-touch-icon-180x180.png"> <link rel="icon" type="image/png" href="../../images/favicons/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../images/favicons/favicon-194x194.png.html" sizes="194x194"> <link rel="icon" type="image/png" href="../../images/favicons/favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../images/favicons/android-chrome-192x192.png" sizes="192x192"> <link rel="icon" type="image/png" href="../../images/favicons/favicon-16x16.png" sizes="16x16"> <link rel="manifest" href="../../images/favicons/manifest.json"> <link rel="shortcut icon" href="../../images/favicons/favicon.ico"> <meta name="msapplication-TileColor" content="#ffc40d"> <meta name="msapplication-TileImage" content="/images/favicons/mstile-144x144.png"> <script type="text/javascript" src="../../assets/js/functions.js"></script> <script async defer data-domain="docs.getdrafts.com" src="https://plausible.io/js/plausible.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Advanced HTML Previews | Drafts User Guide</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="Advanced HTML Previews" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation for Drafts app, a quick-capture note taking app for iPhone, iPad, Mac and Apple Watch." /> <meta property="og:description" content="Documentation for Drafts app, a quick-capture note taking app for iPhone, iPad, Mac and Apple Watch." /> <link rel="canonical" href="html-forms.html" /> <meta property="og:url" content="https://docs.getdrafts.com/docs/actions/html-forms.html" /> <meta property="og:site_name" content="Drafts User Guide" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Advanced HTML Previews" /> <script type="application/ld+json"> {"headline":"Advanced HTML Previews","description":"Documentation for Drafts app, a quick-capture note taking app for iPhone, iPad, Mac and Apple Watch.","url":"https://docs.getdrafts.com/docs/actions/html-forms.html","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path> <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle> <line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line> <line x1="3" y1="6" x2="21" y2="6"></line> <line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path> <polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title fs-6 lh-tight" title="Drafts User Guide"> <img src="../../images/drafts-guide-header.svg" alt="Drafts User Guide" style="max-height: 30px;" /> </a> <a href="html-forms.html#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"> <use xlink:href="#svg-menu"></use> </svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="../../index.html" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="html-forms.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a><a href="../../gettingstarted.html" class="nav-list-link">Getting Started</a><ul class="nav-list "><li class="nav-list-item "><a href="../gettingstarted/migration.html" class="nav-list-link">Migrating from Drafts 4</a></li><li class="nav-list-item "><a href="../gettingstarted/screencasts.html" class="nav-list-link">Screencasts</a></li></ul></li><li class="nav-list-item"><a href="html-forms.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a><a href="../../editor/index.html" class="nav-list-link">Editor</a><ul class="nav-list "><li class="nav-list-item "><a href="../editor/dictation.html" class="nav-list-link">Dictation</a></li><li class="nav-list-item "><a href="../editor/tasks.html" class="nav-list-link">Tasks</a></li><li class="nav-list-item "><a href="../editor/arrangemode.html" class="nav-list-link">Arrange Mode</a></li><li class="nav-list-item "><a href="../editor/focusmode.html" class="nav-list-link">Focus Mode</a></li><li class="nav-list-item "><a href="../editor/linkmode.html" class="nav-list-link">Link Mode</a></li><li class="nav-list-item "><a href="../editor/editorsettings.html" class="nav-list-link">Editor Preferences</a></li><li class="nav-list-item "><a href="../editor/autocomplete.html" class="nav-list-link">Autocomplete</a></li><li class="nav-list-item "><a href="../editor/action-bar.html" class="nav-list-link">Action Bar</a></li><li class="nav-list-item "><a href="../editor/find.html" class="nav-list-link">Find and Replace</a></li><li class="nav-list-item "><a href="../editor/navigation.html" class="nav-list-link">Navigation</a></li><li class="nav-list-item "><a href="../editor/document-scanning.html" class="nav-list-link">Scanning and Live Text</a></li><li class="nav-list-item "><a href="../editor/transcription.html" class="nav-list-link">Transcribing Audio & Video</a></li><li class="nav-list-item "><a href="../editor/previews.html" class="nav-list-link">Previews</a></li></ul></li><li class="nav-list-item"><a href="html-forms.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a><a href="../../drafts/index.html" class="nav-list-link">Managing Drafts</a><ul class="nav-list "><li class="nav-list-item "><a href="../drafts/tagging.html" class="nav-list-link">Flags & Tagging</a></li><li class="nav-list-item "><a href="../drafts/quick-search.html" class="nav-list-link">Quick Search</a></li><li class="nav-list-item "><a href="../drafts/filtering.html" class="nav-list-link">Search & Filtering</a></li><li class="nav-list-item "><a href="../drafts/listoptions.html" class="nav-list-link">List Options</a></li><li class="nav-list-item "><a href="../drafts/workspaces.html" class="nav-list-link">Workspaces</a></li><li class="nav-list-item "><a href="../drafts/versionhistory.html" class="nav-list-link">Version History</a></li><li class="nav-list-item "><a href="https://docs.getdrafts.com/docs/drafts/cross-linking.html" class="nav-list-link">Linking Drafts</a></li></ul></li><li class="nav-list-item active"><a href="html-forms.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a><a href="../../actions.html" class="nav-list-link">Actions</a><ul class="nav-list "><li class="nav-list-item "><a href="editing-actions.html" class="nav-list-link">Configuring Actions</a></li><li class="nav-list-item "><a href="action-groups.html" class="nav-list-link">Action Groups</a></li><li class="nav-list-item "><a href="action-log.html" class="nav-list-link">Action Log</a></li><li class="nav-list-item "><a href="versions.html" class="nav-list-link">Action Versions</a></li><li class="nav-list-item "><a href="html-forms.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a><a href="../../actions/steps/index.html" class="nav-list-link">Action Steps</a><ul class="nav-list"><li class="nav-list-item "> <a href="steps/system.html" class="nav-list-link">System</a> </li><li class="nav-list-item "> <a href="steps/services.html" class="nav-list-link">Services</a> </li><li class="nav-list-item "> <a href="steps/utility.html" class="nav-list-link">Utility</a> </li><li class="nav-list-item "> <a href="steps/advanced.html" class="nav-list-link">Advanced</a> </li></ul></li><li class="nav-list-item "><a href="scripting.html" class="nav-list-link">Scripting</a></li><li class="nav-list-item "><a href="templates.html" class="nav-list-link">Templates</a></li><li class="nav-list-item "><a href="platform-notes.html" class="nav-list-link">Cross-Platform Notes</a></li><li class="nav-list-item active"><a href="html-forms.html" class="nav-list-link active">Advanced HTML Previews</a></li></ul></li><li class="nav-list-item"><a href="../extending/directory.html" class="nav-list-link">Drafts Directory</a></li><li class="nav-list-item"><a href="html-forms.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a><a href="../../settings/index.html" class="nav-list-link">Settings</a><ul class="nav-list "><li class="nav-list-item "><a href="../settings/sync.html" class="nav-list-link">iCloud Sync</a></li><li class="nav-list-item "><a href="../settings/backups.html" class="nav-list-link">Backups</a></li><li class="nav-list-item "><a href="../settings/notifications.html" class="nav-list-link">App Badge</a></li><li class="nav-list-item "><a href="../settings/bookmarks.html" class="nav-list-link">Bookmarks</a></li><li class="nav-list-item "><a href="../settings/credentials.html" class="nav-list-link">Credentials</a></li><li class="nav-list-item "><a href="../settings/markdown.html" class="nav-list-link">Markdown Settings</a></li><li class="nav-list-item "><a href="../settings/automatic-import.html" class="nav-list-link">Automatic Import</a></li></ul></li><li class="nav-list-item"><a href="html-forms.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a><a href="../../automation/index.html" class="nav-list-link">Automation</a><ul class="nav-list "><li class="nav-list-item "><a href="../automation/shortcuts.html" class="nav-list-link">Shortcuts</a></li><li class="nav-list-item "><a href="../automation/urlschemes.html" class="nav-list-link">URL Schemes</a></li><li class="nav-list-item "><a href="../automation/applescript.html" class="nav-list-link">AppleScript</a></li></ul></li><li class="nav-list-item"><a href="html-forms.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a><a href="../../extensions/index.html" class="nav-list-link">Extensions</a><ul class="nav-list "><li class="nav-list-item "><a href="../extensions/applewatch.html" class="nav-list-link">Apple Watch</a></li><li class="nav-list-item "><a href="../extensions/web-capture.html" class="nav-list-link">Drafts Web Capture</a></li><li class="nav-list-item "><a href="../extensions/widgets.html" class="nav-list-link">Widgets</a></li><li class="nav-list-item "><a href="../extensions/share.html" class="nav-list-link">iOS Share and Capture</a></li><li class="nav-list-item "><a href="../extensions/capture-window.html" class="nav-list-link">Mac Share and Capture</a></li><li class="nav-list-item "><a href="../extensions/message.html" class="nav-list-link">iMessage App</a></li></ul></li><li class="nav-list-item"><a href="html-forms.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a><a href="../../extending/index.html" class="nav-list-link">Syntaxes & Themes</a><ul class="nav-list "><li class="nav-list-item "><a href="../extending/syntaxes.html" class="nav-list-link">Syntaxes</a></li><li class="nav-list-item "><a href="../extending/themes.html" class="nav-list-link">Themes</a></li><li class="nav-list-item "><a href="html-forms.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a><a href="../../extending/development.html" class="nav-list-link">Developing</a><ul class="nav-list"><li class="nav-list-item "> <a href="../extending/development/syntax-format.html" class="nav-list-link">Creating Syntaxes</a> </li><li class="nav-list-item "> <a href="../extending/development/theme-format.html" class="nav-list-link">Creating Themes</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="../../draftspro.html" class="nav-list-link">Drafts Pro</a></li><li class="nav-list-item"><a href="html-forms.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a><a href="../../misc/index.html" class="nav-list-link">Miscellaneous</a><ul class="nav-list "><li class="nav-list-item "><a href="../misc/press-kit.html" class="nav-list-link">Press Kit</a></li><li class="nav-list-item "><a href="../misc/attributions.html" class="nav-list-link">Attributions</a></li><li class="nav-list-item "><a href="../../misc/mail-assistant.html" class="nav-list-link">Mail Assistant</a></li><li class="nav-list-item "><a href="../misc/interact-scratchpad.html" class="nav-list-link">Interact Scratchpad</a></li></ul></li><li class="nav-list-item"><a href="html-forms.html#" class="nav-list-expander"><svg viewBox="0 0 24 24"> <use xlink:href="#svg-arrow-right"></use> </svg></a><a href="../../changelog.html" class="nav-list-link">Release Notes</a><ul class="nav-list "></ul></li><li> <hr style="margin:.5em; padding: 0;" /> </li> <li class="nav-list-item"> <a class="nav-list-link nav-external" title="About Drafts" href="https://getdrafts.com/">Get Drafts &#x2192;</a> </li> <li class="nav-list-item"> <a class="nav-list-link nav-external" title="Add-on actions, themes and more" href="https://directory.getdrafts.com/">Directory &#x2192;</a> </li> <li class="nav-list-item"> <a class="nav-list-link nav-external" title="Get your questions answered in the forums" href="https://forums.getdrafts.com/">Community &#x2192;</a> </li> <li class="nav-list-item"> <a class="nav-list-link nav-external" title="Online tools and generators" href="https://tools.getdrafts.com/">Tools &#x2192;</a> </li> <li class="nav-list-item"> <a class="nav-list-link nav-external" title="Scripting library reference" href="https://scripting.getdrafts.com/">Script Reference &#x2192;</a> </li> </ul> </nav> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-0"> Download: <a href="https://itunes.apple.com/app/id1236254471?ls=1&mt=8&at=11l4Cf&ct=site">iOS</a> | <a href="https://itunes.apple.com/app/id1435957248?mt=12&at=11l4Cf&ct=site">Mac</a> </p> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Drafts User Guide" aria-label="Search Drafts User Guide" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"> <use xlink:href="#svg-search"></use> </svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://getdrafts.com" class="site-button" > Get Drafts </a> </li> <li class="aux-nav-list-item"> <a href="https://forums.getdrafts.com" class="site-button" > Community </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../actions.html">Actions</a></li> <li class="breadcrumb-nav-list-item"><span>Advanced HTML Previews</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="advanced-html-previews"> <a href="html-forms.html#advanced-html-previews" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Advanced HTML Previews </h1> <h4 class="no_toc" id="table-of-contents"> <a href="html-forms.html#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of Contents </h4> <ol id="markdown-toc"> <li><a href="html-forms.html#about-html-previews" id="markdown-toc-about-html-previews">About HTML Previews</a></li> <li><a href="html-forms.html#example-actions" id="markdown-toc-example-actions">Example Actions</a></li> <li><a href="html-forms.html#presenting-html-previews" id="markdown-toc-presenting-html-previews">Presenting HTML Previews</a></li> <li><a href="html-forms.html#generating-html-content" id="markdown-toc-generating-html-content">Generating HTML Content</a></li> <li><a href="html-forms.html#controlling-flow" id="markdown-toc-controlling-flow">Controlling Flow</a></li> <li><a href="html-forms.html#sending-data-from-preview" id="markdown-toc-sending-data-from-preview">Sending Data from Preview</a></li> </ol><hr /> <h2 id="about-html-previews"> <a href="html-forms.html#about-html-previews" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> About HTML Previews </h2> <p>The <a href="steps/advanced.html#html-preview">HTML preview action step</a> provides a way to display HTML in a local in-app web browser. The primary use of this step is to preview content intended for the web, and is typically used along with content created in Markdown to preview the HTML output.</p> <p>HTML Previews are not limited to this purpose. The content displayed can be dynamically generated, use all the tools of the browser (HTML/CSS/JavaScript), load remote content (images, scripts, stylesheets, run scripts, and even send data back to Drafts from HTML forms or other dynamic content in the page - allowing the HTML Preview step to be used to generate custom user interfaces for Drafts actions.</p> <p>If you have basic skills in HTML and related technologies, this article is designed to help you utilize some of these advanced features in your actions. Possible use cases:</p> <ul> <li>Creating more complicated user input forms than can be created with Drafts <code class="language-plaintext highlighter-rouge">Prompt</code> scripting, which have validation or other advanced features.</li> <li>Use JavaScript library which depend on running in a browser because they utilize functions not available in Drafts JavaScript runtime (DOM, Ajax).</li> </ul> <h2 id="example-actions"> <a href="html-forms.html#example-actions" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example Actions </h2> <p>Like to learn by example? We have provided a couple of example actions demonstrating use of techniques discussed in this article:</p> <ul> <li><a href="https://actions.getdrafts.com/a/102"><strong>HTML Preview Form Example</strong></a>: Displays a simple HTML form, and shows how to gather values from the form and use them in a script.</li> <li><a href="https://actions.getdrafts.com/a/197"><strong>HTML &gt; Markdown</strong></a>: Uses browser-dependent JavaScript library to convert raw HTML in the current draft into Markdown.</li> </ul> <h2 id="presenting-html-previews"> <a href="html-forms.html#presenting-html-previews" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Presenting HTML Previews </h2> <p>HTML Previews can be presented either using the <a href="steps/advanced.html#html-preview">HTML Preview action step</a> or in script using the <a href="https://scripting.getdrafts.com/classes/htmlpreview"><code class="language-plaintext highlighter-rouge">HTMLPreview</code> object</a>.</p> <p>By default, previews are presented in a window, and contain toolbars with buttons to “Continue” or “Cancel”. HTML Previews can optionally be configured to “Hide interface”, in which case these toolbars will not be displayed. This option is useful when using the preview to generate user interface where you control the flow. See controlling flow section below for details.</p> <h2 id="generating-html-content"> <a href="html-forms.html#generating-html-content" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Generating HTML Content </h2> <p>Whether presenting via the action step or script, the preview requires an HTML document to display. The content displayed should be a complete HTML document. When using HTML Previews to display content from the current draft, one would typically use Drafts <a href="templates.html">template tags</a> to insert dynamic content, but this information could also be loaded from files, include static content, be built by scripts…there are many possibilities.</p> <p>Like any browser display, your generated HTML can:</p> <ul> <li>Include scripts and stylesheets.</li> <li>Link to external resources on the web, like images, stylesheets and scripts.</li> <li>Contain interactive elements, forms, buttons and the like.</li> </ul> <h2 id="controlling-flow"> <a href="html-forms.html#controlling-flow" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Controlling Flow </h2> <p>When an HTML Preview is displayed, it is displayed modally and pauses the execution of the action until it is closed by the user.</p> <p>Drafts makes the following JavaScript functions available to be called from script in the HTML document loaded in the preview:</p> <ul> <li><code class="language-plaintext highlighter-rouge">Drafts.continue()</code>: Call this function to close the preview window and continuing execution of the current action. This is equivalent to the user tapping/clicking the “Continue” button in the preview.</li> <li><code class="language-plaintext highlighter-rouge">Drafts.cancel()</code>: Call this function to close the preview, cancelling. This is equivalent to the user tapping/clicking the “Cancel” button in the preview.</li> </ul> <p>If you choose to display an HTML Preview with the “Hide Interface” option, your own JavaScript in the preview <em>must</em> call one of these functions to close the preview and allow the action to finish.</p> <h2 id="sending-data-from-preview"> <a href="html-forms.html#sending-data-from-preview" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Sending Data from Preview </h2> <p>If using an HTML Preview to gather input, JavaScript in the HTML document can send data back to Drafts using the following function:</p> <ul> <li><code class="language-plaintext highlighter-rouge">Drafts.send(key, value)</code>: Send data to the Drafts scripting context. This can be use to make any values, selections, or other details generated from user input available to scripts running after the preview is presented in the same action. The values become entries in the <code class="language-plaintext highlighter-rouge">context.previewValues</code> object.</li> </ul> <p>In a simple example, if you embed the following script in your HTML Preview:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script&gt;</span>
    <span class="nx">Drafts</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">"</span><span class="s2">myString</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">String value</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">Drafts</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">"</span><span class="s2">myObject</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="dl">"</span><span class="s2">a</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">b</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div> <p>After the script is run in the preview, in a subsequent script step in the same action, these values could be accessed as follows:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">previewValues</span><span class="p">[</span><span class="dl">"</span><span class="s2">myString</span><span class="dl">"</span><span class="p">];</span> <span class="c1">// "String Value"</span>
<span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">previewValues</span><span class="p">[</span><span class="dl">"</span><span class="s2">myObject</span><span class="dl">"</span><span class="p">];</span> <span class="c1">// {"a": 1, "b": 2}</span>
</code></pre></div></div> <p>A more practical example, you might serialize the values in an HTML form, and send those back to Drafts when the user submits the form. Something along the lines of the below in your HTML:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"data-form"</span><span class="nt">&gt;</span>
<span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"input-1"</span><span class="nt">&gt;</span>Input 1<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"input-1"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">placeholder=</span><span class="s">"Input 1"</span> <span class="na">value=</span><span class="s">"Sample text"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>
	<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"select-1"</span><span class="nt">&gt;</span>Select 1<span class="nt">&lt;/label&gt;</span>
	<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"select-1"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;option&gt;</span>0<span class="nt">&lt;/option&gt;</span>
		<span class="nt">&lt;option&gt;</span>1<span class="nt">&lt;/option&gt;</span>
		<span class="nt">&lt;option&gt;</span>2<span class="nt">&lt;/option&gt;</span>
	<span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"checkbox-1"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"checkbox-1"</span> <span class="nt">/&gt;</span><span class="ni">&amp;nbsp;</span>Checkbox 1<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"margin: 1em 0 3em 0;"</span><span class="nt">&gt;</span>
<span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"submitFormById('data-form');return false;"</span><span class="nt">&gt;</span>
    Submit
<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="c1">// load form values to an object</span>
<span class="kd">let</span> <span class="nx">serialize</span> <span class="o">=</span> <span class="p">(</span><span class="nx">form</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">e</span> <span class="k">of</span> <span class="nx">form</span><span class="p">.</span><span class="nx">elements</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">type</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">checkbox</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">data</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// send values to Drafts action, then continue...</span>
<span class="kd">let</span> <span class="nx">submitFormById</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	<span class="kd">let</span> <span class="nx">f</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
	<span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">serialize</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span>
	<span class="nx">Drafts</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">"</span><span class="s2">formValues</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
	<span class="nx">Drafts</span><span class="p">.</span><span class="k">continue</span><span class="p">();</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div> <hr> <footer> <p> <a href="https://itunes.apple.com/app/id1236254471?ls=1&mt=8&at=11l4Cf&ct=site"> <img src="../../images/appstore.svg" alt="Download on App Store" /> </a> <a href="https://itunes.apple.com/app/id1435957248?mt=12&at=11l4Cf&ct=site"> <img src="../../images/macappstore.svg" alt="Download on Mac App Store" /> </a> </p> <p>&copy; 2012-2022 by Agile Tortoise, Inc.<br /> Drafts is a registered Trademark of Agile Tortoise, Inc.<br /> <a href="https://getdrafts.com/support/privacy">Privacy</a> | <a href="https://getdrafts.com/support/terms">Terms</a> </p> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
