<!DOCTYPE html>
<html dir="auto">

<head>
  <title>Using Notion with Drafts</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    @charset "utf-8";

    :root {
      --main-bg-color: #000056;
      --main-color: #ffe8bd;
      --alternate-bg-color: #1c0021;
      --alternate-color: #fff4e6;
      --main-border-color: #f43f32;
        --link-color: #36fd63;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --main-bg-color: #fff4e6;
        --main-color: #00006b;
        --alternate-bg-color: #fffdeb;
        --alternate-color: #1c0021;
        --main-border-color: #f43f32;
          --link-color: #ff0000;
      }
    }

    html {
      font-size: 100%;
      font-family: -apple-system, BlinkMacSystemFont, "helvetica neue", helvetica, roboto, noto, "segoe ui", arial, sans-serif;
      line-height: 1.4;
    }

    body {
      margin: 0;
      padding: 1em;
      background-color: var(--main-bg-color);
      color: var(--main-color);
    }

    @media (max-device-width: 480px) {}

    @media (min-device-width: 481px) {
      body {
        margin: auto;
        max-width: 600px;
      }
    }

    blockquote {
      font-style: italic;
      margin: 1.5em 2em;
      padding: 1em;
      background-color: var(--alternate-bg-color);
      color: var(--alternate-color);
    }

    a {
      color: var(--link-color);
    }
    pre {
      display: block;
      overflow: scroll;
      width: 100%;
      background-color: var(--alternate-bg-color);
      padding: .5em 1em;
      margin: 1em 0;
    }

    code {
      background-color: var(--alternate-bg-color);
      color: var(--alternate-color);
      font-family: Menlo, Courier, sans-serif;
      padding: 2px 3px;
    }

    table {
      margin: 1.5em 0;
      border: 1px solid var(--main-border-color);
      border-collapse: collapse;
    }

    th {
      padding: .25em .5em;
      background: var(--alternate-bg-color);
      border: 1px solid var(--main-border-color);
    }

    td {
      padding: .25em .5em;
      border: 1px solid var(--main-border-color);
    }

    img {
      max-width: 90%;
    }
  </style>
</head>

<body>
  <h1>Using Notion with Drafts</h1>

<figure>
<img src="upload://kfgJ95xnp9sAMMBNS6WbTNliysk.png" alt="notion|622x330, 50%" />
<figcaption>notion|622x330, 50%</figcaption>
</figure>

<blockquote>
<p><strong>NOTE:</strong> Notion integration requires Drafts v31 or greater. The Notion API used for integration is still in beta, as such aspects of this functionality may change or break and Notion finalizes their API.</p>
</blockquote>

<p><a href="https://www.notion.so">Notion</a> is an online project management and information system. Drafts currently two ways to integrate with Notion:</p>

<ul>
<li><a href="https://docs.getdrafts.com/docs/actions/steps/services#notion">Notion action step</a>. Can create new sub-pages, or append to existing pages, as plain text or as to-do lists.</li>
<li><a href="https://scripting.getdrafts.com/classes/notion"><code>Notion</code> script object</a>: Provides a <code>request</code> method which allows you to script calls to the full Notion API, while providing automatic OAuth authenticate flow.</li>
</ul>

<p>The action step provides a basic, easy to approach way to get your data from Drafts to Notion. Scripting supports advanced integration, for users needing to work with databases and other block types in Notion.</p>

<h2>Notion Authentication and Permissions</h2>

<p>Like most services Drafts integrates with, Notion uses the <a href="https://en.wikipedia.org/wiki/OAuth">OAuth standard</a> for authentication. The first time you use an action that integrates with Notion, you will be redirected to the Notion website and asked to log in and authorize Drafts to use your account.</p>

<p>When authenticating, Notion has an additional step of selecting specific pages in Notions which the integration will be granted permissions to access. It is recommended you give Drafts permissions <em>only</em> to the pages you plan to target with actions.</p>

<figure>
<img src="upload://5GZeyq75fzyHzjsUiUFdzmCuZH1.png" alt="notion-authentication|690x367, 100%" />
<figcaption>notion-authentication|690x367, 100%</figcaption>
</figure>

<p>After you have authorized Drafts, you can add and remove page permissions in the Notion interface:</p>

<ul>
<li>Navigate to the Notion Page you wish to add to the Drafts integration.</li>
<li>Select &#8220;Share&#8221;, then &#8220;Invite&#8221; and select the &#8220;Drafts&#8221; integration to allow it permission to use the page.</li>
</ul>

<p>Permissions are inherited, so granting Drafts permission to access a page or workspace, gives it permission to access child elements of that item.</p>

<p>If &#8220;Drafts&#8221; does not appear as an option when to invite in your share page, make sure you have run a Notion action in Drafts and successfully authenticated to the correct workspace in Notion.</p>

<h2>Notion Action Step</h2>

<p>The <a href="https://docs.getdrafts.com/docs/actions/steps/services#notion">Notion action step</a> can add text or to-do lists to pages in Notion. Aspects of this step may change, but it&#8217;s a start. To get started, install an example action:</p>

<ul>
<li><a href="https://directory.getdrafts.com/a/1uS">Notion-Create Page</a></li>
<li><a href="https://directory.getdrafts.com/a/1uC">Notion-Append as Text</a></li>
<li><a href="https://directory.getdrafts.com/a/1uT">Notion-Append as To-Do List</a></li>
<li><a href="https://directory.getdrafts.com/a/1uD">Notion-Append as To Do List</a></li>
</ul>

<p>By default, these examples ask you to select a Notion page as a target each time they are run. They can also be configured to target a specific page by page ID. See next section on obtaining IDs, and the <a href="https://docs.getdrafts.com/docs/actions/steps/services#notion">step documentation</a> for further details on options available.</p>

<h2>Obtaining Notion Page IDs</h2>

<p>To configure action steps to target a specific page in Notion, you can use the &#8220;Select&#8221; button in the action step configuration, or obtain a specific Page ID from Notion.</p>

<figure>
<img src="upload://slEXJlvCo6JOqrUZk8k0MMP56jD.png" alt="notion-page-id|690x386" />
<figcaption>notion-page-id|690x386</figcaption>
</figure>

<p>To get a page ID:</p>

<ul>
<li>Navigate to the page in the Notion website or app.</li>
<li>Use the &#8220;Share&#8221; button, and &#8220;Copy Link&#8221; to get the unique URL for the page.</li>
<li>The Page ID is the string of numbers and letters at the end of the URL.</li>
</ul>

<p>Once you obtain that page ID, you can paste it in an action and change the action to &#8220;Assign&#8221; the target page.</p>

<p><em>Be sure the page you wish to target has been invited to the &#8220;Drafts&#8221; integration (see permissions section above) or the action will fail.</em></p>

<h2>Using the Notion API in Script</h2>

<p>For advanced users, Drafts also provides a <a href="https://scripting.getdrafts.com/classes/notion">Notion Script object</a> that allows you to make requests directly against the Notion API. Any API calls can be used, see <a href="https://developers.notion.com/reference/intro">Notion API docs</a> for information on available methods. This object may add convenience methods for some functions, but right now only has a single <code>request</code> method that allows for arbitrary calls against the Notion API. Example action:</p>

<ul>
<li><a href="https://directory.getdrafts.com/a/1uE">Notion: List Pages</a></li>
</ul>

<h2>Notion and Markdown/Rich Text/HTML</h2>

<p>Notion stores text in its own <a href="https://developers.notion.com/reference/block">structured block format</a>. In their own apps and web version, they have tools that convert between Markdown pasted into the interface, and this native block format.</p>

<p>At this time, Notion has not added the ability to convert between this native block format and HTML or Markdown to the capabilities of the API.</p>

<p>It is possible to construct Notion blocks using JavaScript in Drafts (they are just complex JSON objects), and pass those values to the API, but due to the complexity of the format, we do not have any automated tools to do this conversion.</p>

<p>We are hoping Notion adds this capability before the API is final, and we will certain support it to provide a smoother way to pass Markdown and/or HTML to Notion if they do.</p>

<hr />

<p>agiletortoise | 2022&#8211;02&#8211;16 16:37:02 UTC | #2</p>

<hr />

<p>agiletortoise | 2022&#8211;02&#8211;25 12:44:59 UTC | #3</p>

<hr />

<p>yacafx | 2022&#8211;02&#8211;26 22:40:55 UTC | #4</p>

<p>Looks like the link for https://scripting.getdrafts.com/classes/notion is not workingâ€¦ or maybe not published yet?</p>

<hr />

<p>agiletortoise | 2022&#8211;02&#8211;26 22:46:52 UTC | #5</p>

<p>Oops, forgot to push the scripting reference updates. It&#8217;s there now.</p>

<hr />

<p>yacafx | 2022&#8211;02&#8211;26 23:51:48 UTC | #6</p>

<p>U r the best! Thank u! ðŸ˜ƒðŸ˜ƒðŸ˜ƒ</p>

<hr />

<p>nk141700 | 2022&#8211;02&#8211;27 04:17:32 UTC | #7</p>

<p>Good to see some Notion integrations!</p>

<p>After playing around with these options, I take it neither the &#8220;Create Page&#8221; or &#8220;Append as Text&#8221; action steps are capable of creating a new entry / page in a database?</p>

<p>Is that capability on the horizon?</p>

<hr />

<p>sylumer | 2022&#8211;02&#8211;27 09:58:28 UTC | #8</p>

<p>In case it helps, it should be possible now - see &#8220;Using the Notion API in Script&#8221; above. It is just that you have to do some of the lifting rather than there being a prebuilt action to help.</p>

<p>If there&#8217;s a demand and use there for these options in particular, I wouldn&#8217;t be surprised if Greg built it into Drafts, or a Notion &amp; Drafts user shared an action to do this based on scripting the interaction.</p>

<hr />

<p>nk141700 | 2022&#8211;02&#8211;27 15:36:42 UTC | #9</p>

<p>Understood, thanks! I&#8217;ll give that a shot and see what I can come up with.</p>

<hr />

</body>

<footer>
<p><a href="https://twitter.com/NeoYokel">Twitter</a> - <a href="https://mastodon.social/@DavidBlue">Mastodon</a> - <a href="https://t.me/davidblue">Telegram</a> - <a href="drafts://open?uuid=9E54F8B3-61D2-4C27-B52B-4970081DE857">Local</a></p>
</footer>
</html>